# 德州扑克积分统计系统 - 项目架构说明

## 📊 整体架构

```
┌─────────────────────────────────────────────────────────┐
│                    CrisCL 项目根目录                      │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌──────────────────┐              ┌─────────────────┐  │
│  │   frontend/      │              │   backend/      │  │
│  │   前端应用        │  ◄────API───►│   后端服务器     │  │
│  │                  │              │                 │  │
│  │  React + Vite    │              │  Express + JSON │  │
│  │  Port: 3000      │              │  Port: 3001     │  │
│  └──────────────────┘              └─────────────────┘  │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │  启动全部服务.command  (一键启动脚本)                 │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │  文档: README.md, 前后端分离说明.md, 快速开始.txt    │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

## 📁 详细目录结构

```
CrisCL/
│
├── frontend/                    # 前端应用目录
│   ├── src/                    # 源代码
│   │   ├── components/         # React 组件
│   │   │   ├── Icons.jsx              # SVG图标组件
│   │   │   ├── CurrentGame.jsx        # 当前游戏页面
│   │   │   ├── History.jsx            # 历史记录页面
│   │   │   └── PlayerDetail.jsx       # 玩家详情页面
│   │   │
│   │   ├── utils/              # 工具函数
│   │   │   ├── storage.js             # API存储封装
│   │   │   └── helpers.js             # 辅助函数
│   │   │
│   │   ├── App.jsx             # 主应用组件
│   │   ├── main.jsx            # 应用入口
│   │   └── index.css           # 全局样式
│   │
│   ├── index.html              # HTML模板
│   ├── package.json            # 前端依赖配置
│   ├── vite.config.js          # Vite构建配置
│   ├── tailwind.config.js      # Tailwind CSS配置
│   ├── postcss.config.js       # PostCSS配置
│   ├── .gitignore              # Git忽略文件
│   ├── 启动开发服务器.command   # 前端启动脚本
│   └── README.md               # 前端文档
│
├── backend/                    # 后端服务器目录
│   ├── data/                   # 数据存储
│   │   ├── poker-history.json         # 游戏历史记录
│   │   ├── poker-favorites.json       # 收藏的玩家
│   │   └── .gitkeep                   # 保持目录存在
│   │
│   ├── server.js               # Express服务器
│   ├── dataStore.js            # 数据存储模块
│   ├── package.json            # 后端依赖配置
│   ├── test-api.sh             # API测试脚本
│   ├── .gitignore              # Git忽略文件
│   ├── 启动后端服务器.command   # 后端启动脚本
│   └── README.md               # 后端文档
│
├── 启动全部服务.command         # 一键启动脚本
├── 前后端分离说明.md            # 架构详细说明
├── 快速开始.txt                # 快速参考
├── 项目架构说明.md              # 本文件
├── README.md                   # 项目主文档
├── 使用指南.md                 # 用户使用指南
├── 开发文档.md                 # 开发文档
├── .gitignore                  # 项目Git忽略
├── backend.log                 # 后端日志（运行时生成）
└── frontend.log                # 前端日志（运行时生成）
```

## 🎯 架构设计原则

### 1. 前后端分离
- **前端 (frontend/)**: 负责用户界面展示和交互
- **后端 (backend/)**: 负责数据管理和业务逻辑
- **通信方式**: RESTful API

### 2. 模块化组织
- **前端组件化**: 每个功能独立为组件
- **后端模块化**: 数据层、路由层分离
- **配置独立**: 各自的依赖和配置文件

### 3. 易于部署
- **独立部署**: 前后端可以分别部署
- **静态资源**: 前端构建后为纯静态文件
- **API服务**: 后端可部署到任何Node.js环境

## 🔄 数据流

```
用户操作
   ↓
前端组件 (React)
   ↓
storage.js (API封装)
   ↓
HTTP Request
   ↓
后端服务器 (Express)
   ↓
dataStore.js (数据层)
   ↓
JSON文件存储
```

## 🛠️ 技术栈

### 前端技术栈
| 技术 | 版本 | 用途 |
|------|------|------|
| React | 18.2.0 | UI框架 |
| Vite | 5.0.8 | 构建工具 |
| Tailwind CSS | 3.4.0 | 样式框架 |

### 后端技术栈
| 技术 | 版本 | 用途 |
|------|------|------|
| Node.js | - | 运行环境 |
| Express | 4.18.2 | Web框架 |
| CORS | 2.8.5 | 跨域支持 |

### 数据存储
- **类型**: JSON 文件
- **位置**: `backend/data/`
- **优势**: 简单、无需数据库、易于备份

## 📡 API设计

### 端点设计
```
GET    /api/health           健康检查
GET    /api/history          获取历史记录
POST   /api/history          添加游戏记录
PUT    /api/history          更新所有历史
DELETE /api/history/:id      删除游戏记录
GET    /api/favorites        获取收藏列表
PUT    /api/favorites        更新收藏列表
```

### 响应格式
```json
{
  "success": true,
  "data": { /* 数据内容 */ }
}
```

## 🚀 启动流程

### 完整启动流程
```
1. 用户执行启动命令
   └─→ 启动全部服务.command

2. 检查并安装依赖
   ├─→ frontend/node_modules
   └─→ backend/node_modules

3. 启动后端服务器
   └─→ localhost:3001 (API服务)

4. 启动前端服务器
   └─→ localhost:3000 (Web界面)

5. 用户访问浏览器
   └─→ http://localhost:3000
```

## 📦 部署方案

### 开发环境
- **前端**: Vite开发服务器 (localhost:3000)
- **后端**: Node.js直接运行 (localhost:3001)
- **数据**: 本地JSON文件

### 生产环境选项

#### 方案一：同一服务器部署
```
Nginx (80/443)
├─→ /          → 前端静态文件 (frontend/dist/)
└─→ /api/*     → 后端服务 (backend/ on port 3001)
```

#### 方案二：分离部署
```
前端: Netlify/Vercel (静态托管)
后端: VPS/云服务器 (Node.js)
数据: 同后端服务器
```

#### 方案三：容器化部署
```
Docker Compose:
├─→ frontend container (nginx + static files)
└─→ backend container (node.js)
    └─→ volume: data/
```

## 🔐 安全考虑

### 当前状态（开发环境）
- ✅ CORS允许所有来源
- ❌ 无身份验证
- ❌ 无数据加密
- ❌ 无访问限制

### 生产环境建议
1. **CORS限制**: 只允许特定域名
2. **添加认证**: JWT或Session
3. **HTTPS**: 使用SSL证书
4. **输入验证**: 验证所有API输入
5. **日志记录**: 记录所有操作
6. **备份策略**: 定期备份数据

## 📈 可扩展性

### 短期扩展
- [ ] 添加用户认证系统
- [ ] 导出数据为Excel/PDF
- [ ] 添加更多统计图表
- [ ] 支持多语言

### 中期扩展
- [ ] 升级到数据库（MongoDB/PostgreSQL）
- [ ] 实时同步（WebSocket）
- [ ] 移动App（React Native）
- [ ] 数据分析和报表

### 长期扩展
- [ ] 微服务架构
- [ ] 分布式部署
- [ ] 大数据分析
- [ ] AI辅助决策

## 🔧 维护指南

### 日常维护
1. **检查日志**: 定期查看 `backend.log` 和 `frontend.log`
2. **备份数据**: 每周备份 `backend/data/` 目录
3. **更新依赖**: 每月检查并更新npm包

### 故障排查
1. **前端无法访问**: 检查端口3000是否被占用
2. **后端无法访问**: 检查端口3001是否被占用
3. **数据丢失**: 恢复 `backend/data/` 备份
4. **CORS错误**: 检查后端CORS配置

### 性能优化
1. **前端**: 代码分割、图片优化、CDN加速
2. **后端**: 添加缓存、优化查询、负载均衡
3. **数据**: 数据库索引、查询优化

## 📚 相关文档

- **快速开始**: `快速开始.txt`
- **项目主文档**: `README.md`
- **前端文档**: `frontend/README.md`
- **后端文档**: `backend/README.md`
- **架构详解**: `前后端分离说明.md`
- **用户指南**: `使用指南.md`
- **开发文档**: `开发文档.md`

## 🎉 总结

这个项目采用了清晰的前后端分离架构：
- ✅ **结构清晰**: 前后端代码完全分离
- ✅ **易于开发**: 独立开发和测试
- ✅ **便于部署**: 可分离部署或统一部署
- ✅ **可扩展性**: 为未来功能扩展预留空间
- ✅ **易于维护**: 模块化设计，职责明确

现在你有了一个专业、规范的项目结构！🚀

